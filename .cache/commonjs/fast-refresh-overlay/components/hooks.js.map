{"version":3,"file":"hooks.js","names":["initialResponse","decoded","sourcePosition","line","number","sourceContent","useStackFrame","codeFrameInformation","moduleId","lineNumber","columnNumber","skipSourceMap","endLineNumber","endColumnNumber","url","window","encodeURIComponent","response","setResponse","React","useState","useEffect","fetchData","res","fetch","json","prettifyStack","codeFrame","err","message","useFileCodeFrame","filePath"],"sources":["../../../fast-refresh-overlay/components/hooks.js"],"sourcesContent":["import * as React from \"react\"\nimport { prettifyStack } from \"../utils\"\n\nconst initialResponse = {\n  decoded: null,\n  sourcePosition: {\n    line: null,\n    number: null,\n  },\n  sourceContent: null,\n}\n\nexport function useStackFrame(codeFrameInformation) {\n  const {\n    moduleId,\n    lineNumber,\n    columnNumber,\n    skipSourceMap,\n    endLineNumber,\n    endColumnNumber,\n  } = codeFrameInformation ?? {}\n\n  let url =\n    `/__original-stack-frame?moduleId=` +\n    window.encodeURIComponent(moduleId) +\n    `&lineNumber=` +\n    window.encodeURIComponent(lineNumber) +\n    `&columnNumber=` +\n    window.encodeURIComponent(columnNumber)\n\n  if (skipSourceMap) {\n    url += `&skipSourceMap=true`\n  }\n\n  if (endLineNumber) {\n    url += `&endLineNumber=` + window.encodeURIComponent(endLineNumber)\n\n    if (endColumnNumber) {\n      url += `&endColumnNumber=` + window.encodeURIComponent(endColumnNumber)\n    }\n  }\n\n  const [response, setResponse] = React.useState(initialResponse)\n\n  React.useEffect(() => {\n    if (!codeFrameInformation) return\n\n    async function fetchData() {\n      try {\n        const res = await fetch(url)\n        const json = await res.json()\n        const decoded = prettifyStack(json.codeFrame)\n        const { sourcePosition, sourceContent } = json\n        setResponse({\n          decoded,\n          sourceContent,\n          sourcePosition,\n        })\n      } catch (err) {\n        setResponse({\n          ...initialResponse,\n          decoded: prettifyStack(err.message),\n        })\n      }\n    }\n    fetchData()\n  }, [])\n\n  return response\n}\n\nexport function useFileCodeFrame({ filePath, lineNumber, columnNumber }) {\n  const url =\n    `/__file-code-frame?filePath=` +\n    window.encodeURIComponent(filePath) +\n    `&lineNumber=` +\n    window.encodeURIComponent(lineNumber) +\n    `&columnNumber=` +\n    window.encodeURIComponent(columnNumber)\n\n  const [response, setResponse] = React.useState({ decoded: null })\n\n  React.useEffect(() => {\n    async function fetchData() {\n      try {\n        const res = await fetch(url)\n        const json = await res.json()\n        const decoded = prettifyStack(json.codeFrame)\n        setResponse({\n          decoded,\n        })\n      } catch (err) {\n        setResponse({\n          decoded: prettifyStack(err.message),\n        })\n      }\n    }\n    fetchData()\n  }, [])\n\n  return response\n}\n"],"mappings":"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"}